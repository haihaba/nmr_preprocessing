<<<<<<< HEAD
<tool id="NMR_Read" name="NMR_Read" version="3.0.1">
=======
<tool id="NMR_Read" name="NMR_Read" version="0.1.0">
>>>>>>> 3cdb294d8554f70467930c415d2a905d833fbcec
	<description> Read NMR raw files</description>
	
    <stdio>
        <exit_code range="1:" level="fatal" />
    </stdio>
	
  	<command>
  	    ## Wrapper
        Rscript $__tool_directory__/ReadFids_wrapper.R

		## File input
        fidzipfile $fidzipfile
		
		## Title line
		title_line $title_line
		
		## Subdirectories
		subdirectories $subdirectories
		
		## Use subdirectories names as FID names?
		subdirs_names $subdirs_names

        ## Outputs
        dataMatrixOut $dataMatrixOut
        sampleOut $sampleOut
        logOut $logOut
        graphOut $graphOut
		
	</command>
		
  	<inputs>
		<param name="fidzipfile" type="data" format="no_unzip.zip" label="Bruker FID file" />
        
		<param name="title_line" label="FID title" type="integer" value="1" size="100" help="Default value is line 1"/>

        <param name="subdirectories" label="Presence of subdirectories?" type="select" help="Select 'FALSE' when there is no subdirectories, 'TRUE' if there are subdirectories">
            <option value="FALSE"> FALSE </option>
            <option value="TRUE"> TRUE </option>
        </param>
        
        <param name="subdirs_names" label="Use subdirectories names as FID names?" type="select" help="Select 'TRUE' to use the subdirectories names as the FID names">
            <option value="FALSE"> FALSE </option>
            <option value="TRUE"> TRUE </option>
        </param>
	</inputs>	
	
	
	<outputs>
		<data format="tabular" name="dataMatrixOut" label="${tool.name}_dataMatrixOut" />
		<data format="tabular" name="sampleOut" label="${tool.name}_sampleMetadataOut" />
		<data format="txt" name="logOut" label="${tool.name}_log" />
		<data format="pdf" name="graphOut" label="${tool.name}_graph" />
	</outputs>

	<help>

.. class:: infomark

**Authors** Manon Martin (manon.martin@uclouvain.be) and Marie Tremblay-Franco (marie.tremblay-franco@inra.fr; Galaxy integration)

.. class:: infomark

**Please cite**
Rousseau, R. (2011). Statistical contribution to the analysis of metabonomics data in 1H NMR spectroscopy (Doctoral dissertation, PhD thesis. 
Institut de statistique, biostatistique et sciences actuarielles, Universit√© catholique de Louvain, Belgium).


=============
NMR Read
=============

-----------
Description
-----------

Nuclear Magnetic Resonance files reading (from the R 'SOAP' package)

-----------------
Workflow position
-----------------

**Upstream tools**

========================= ================= =======
Name                      output file       format
========================= ================= =======
NA                        NA                NA
========================= ================= =======


**Downstream tools**

+---------------------------+----------------------+--------+
| Name                      | Output file          | Format |
+===========================+======================+========+
|NMR_PreProcessing          | dataMatrix.tsv       | Tabular|
+---------------------------+----------------------+--------+
|                           | sampleMetadata.tsv   | Tabular|
+---------------------------+----------------------+--------+
|                           | variableMetadata.tsv | Tabular|
+---------------------------+----------------------+--------+
|NMR_Alignement             | dataMatrix.tsv       | Tabular|
+---------------------------+----------------------+--------+
|NMR_Bucketing              | dataMatrix.tsv       | Tabular|
+---------------------------+----------------------+--------+
|Normalization              | dataMatrix.tsv       | Tabular|
+---------------------------+----------------------+--------+
|Univariate                 | variableMetadata.tsv | Tabular|
+---------------------------+----------------------+--------+
|Multivariate               | sampleMetadata.tsv   | Tabular|
+---------------------------+----------------------+--------+
|                           | variableMetadata.tsv | Tabular|
+---------------------------+----------------------+--------+


-----------
Input files
-----------

+---------------------------+-----------------+
| Parameter : num + label   |   Format        |
+===========================+=================+
| 1 : Choose your inputs    |   FID           |
+---------------------------+-----------------+
| 1 : Choose your inputs    |   Jcamp-dx      |
+---------------------------+-----------------+

**Choose your inputs**

    | Zip file (recommended) of FID Bruker files: you can put a zip file containing your FID Bruker files: myinputs.zip (containing all your conditions as sub-directories).
    | Zip file (recommended) of Jcamp-dx files: you can put a zip file containing your Jcamp-dx files: myinputs.zip (containing all your conditions as sub-directories).


----------
Parameters
----------

FID Title
	| Line in the acqus file to find the FID title (name)
	|

subdirectories
	| Organization of individual's files
	| TRUE: will search inside subdirectories for FIDs and will merge them to have unique FID and info matrices.
	|

------------
Output files
------------

dataMatrixOut.tsv
	| tabular output
	| Data matrix with n rows (samples) and p columns (time) containing the raw FIDs
	|

sampleOut.pdf
	| tabular output
	| Data matrix with n rows (samples) containing the acquisition parameters

logOut.tsv
	| Text output
	| Contains warnings
	|
---------------------------------------------------

---------------
Example
---------------


   </help>

   <citations>
        <citation type="bibtex">@ARTICLE{Kim07aninterior-point,
   author = {R. Rousseau},
   title = {Statistical contribution to the analysis of metabonomic data in 1H-NMR spectroscopy},
   journal = {Ph.D. Thesis},
   year = {2011}
        }</citation>
        <citation type="doi">10.1093/bioinformatics/btu813</citation>
    </citations>
    
</tool>
